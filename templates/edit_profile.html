{% extends 'user_layout.html' %}

{% block user %}


    <div class="container table-bordered">

       <h1>Edit Profile</h1>
       {% from "includes/_formhelpers.html" import render_field %}

       <form method="POST" action="">
           <div class="form-group">
               {{ render_field(form.name, class="form-control", id="name") }}
               <p id="name_msg"></p>
               
           </div>

           <div class="form-group">
            {{ render_field(form.cnic, class="form-control", id='cnic') }}
            <p id="cnic_msg"></p>
            
        </div>

        <div class="form-group">
            {{ render_field(form.speciality, class="form-control", id="spec") }}
            <p id="spec_msg"></p>
            
        </div>

        <div class="form-group">
            {{ render_field(form.email, class="form-control",id="email") }}
            <p id="email_msg"></p>
            
        </div>

        <div class="form-group">
            {{ render_field(form.username, class="form-control", id="username") }}
            <p id="username_msg"></p>
            
        </div>

           

            <p><input class="btn btn-primary" type="submit" value="Submit" id="submit-btn"></p>



        </form>

    </div>

    <script>
        $(document).ready(function(){

            // <First_Name_Validation> start
            $('#name_msg').hide();

            var nameErr = true;

            $('#name').keyup(function(){//keyup executes the function by key press
                name_check(); //function to validate fname
            });

            function name_check(){

                var name = $('#name').val();

                if(name.length == " " ){
                    $('#name_msg').show();
                    $('#name_msg').html("Please Enter Full Name.");//overrides
                    $('#name_msg').focus();
                    $('#name_msg').css("color","red");
                    nameErr = false;
                    return false;
                }
                else{
                    $('#name_msg').hide();
                }

                if(name.length > 50 ){
                    $('#name_msg').show();
                    $('#name_msg').html("Max: 50 Characters allowed.");//overrides
                    $('#name_msg').focus();
                    $('#name_msg').css("color","red");
                    nameErr = false;
                    return false;
                }
                else{
                    $('#name_msg').hide();
                }

                if(name.match(/^\d/)){   //for numeric validation when starting name
                    $('#name_msg').show();
                    $('#name_msg').html("Name should start with alphabet.");//overrides
                    $('#name_msg').focus();
                    $('#name_msg').css("color","red");
                    nameErr = false;
                    return false;
                }
                else{
                    $('#name_msg').hide();
                }

                if((name.match(/^\W/)) || (name.match("^[_]$")) ){    //for special characters validation when starting name
                    $('#name_msg').show();
                    $('#name_msg').html("Name should start with alphabet.");//overrides
                    $('#name_msg').focus();
                    $('#name_msg').css("color","red");
                    nameErr = false;
                    return false;
                }
                else{
                    $('#name_msg').hide();
                }
                
            }
            //</First_Name_Validation> ends



            //<Email_Validation> starts
            $('#email_msg').hide();
            
            var emailErr = true;

            $('#email').keyup(function(){ //function executes by keyup
            email_check(); //function to check email
            });

            function email_check(){
            var email = $("#email").val();
            var reg = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/ //regular expression for email validation

            if(email.length == " " ){
                $('#email_msg').show();
                $('#email_msg').html("Please Enter Email Address.");//overrides
                $('#email_msg').focus();
                $('#email_msg').css("color","red");
                emailErr = false;
                return false;
            }
            else{
                $('#email_msg').hide();
            }

            if (reg.test(email)){
                $('#email_msg').hide();
                emailErr = true;
                return true;
            }
            else
            {
                $('#email_msg').show();
                $('#email_msg').html("Please Enter Correct Email Format. e.g: abc@xyz.com");//overrides
                $('#email_msg').focus();
                $('#email_msg').css("color","red");
                emailErr = false;
                return false;
                    
            }
        }

        //</Email_Validation> ends


             //<CNIC_Validation> start
            $('#cnic_msg').hide();
    
            var cnicErr = true;

            $('#cnic').keyup(function(){
                cnic_check(); //function to check phone number
            });

            function cnic_check(){
                var cnic = $("#cnic").val();
                var reg = '^[0-9]{5}-[0-9]{7}-[0-9]$'
                ///^[0-9-+]+$/ //regular expression for cnic number validation

                if (cnic.length == " "){
                    $('#cnic_msg').show();
                    $('#cnic_msg').html("Please Enter CNIC Number e.g: 12345-1234567-1");//overrides
                    $('#cnic_msg').focus();
                    $('#cnic_msg').css("color","red");
                    cnicErr = false;
                    return false;
                }
                else{
                    $('#cnic_msg').hide();
                }
                
            
                

                if (cnic.match(reg)){
                    $('#cnic_msg').hide();
                    cnicErr = true;
                    return true;
                }
                else if(!cnic.match(reg))
                {
                    $('#cnic_msg').show();
                    $('#cnic_msg').html("Please Enter CNIC Number in numeric and correct format. e.g: 12345-1234567-1");//overrides
                    $('#cnic_msg').focus();
                    $('#cnic_msg').css("color","red");
                    cnicErr = false;
                    return false;
                    
                }
            

            
        }
        //</CNIC_Validation> ends


        //<Speciality_Validation> starts

        $('#spec_msg').hide();

        var specErr = true;

        $('#spec').keyup(function(){//keyup executes the function by key press
            spec_check(); //function to validate fname
        });

        function spec_check(){

            var spec = $('#spec').val();

            if(spec.length == " " ){
                $('#spec_msg').show();
                $('#spec_msg').html("Please Enter Doctor's Speciality.");//overrides
                $('#spec_msg').focus();
                $('#spec_msg').css("color","red");
                specErr = false;
                return false;
            }
            else{
                $('#spec_msg').hide();
            }

            if(spec.length > 50 ){
                $('#spec_msg').show();
                $('#spec_msg').html("Max: 50 Characters allowed.");//overrides
                $('#spec_msg').focus();
                $('#spec_msg').css("color","red");
                specErr = false;
                return false;
            }
            else{
                $('#spec_msg').hide();
            }

        

        
            
        }

        //<Speciality_Validation> ends



             //<Username_Validation> starts
            $('#username_msg').hide();

            var usernameErr = true;

            $('#username').keyup(function(){//keyup executes the function by key press
                username_check(); //function to validate fname
            });

            function username_check(){

                var username = $('#username').val();

                if(username.length == " " ){
                    $('#username_msg').show();
                    $('#username_msg').html("Please Enter Username.");//overrides
                    $('#username_msg').focus();
                    $('#username_msg').css("color","red");
                    usernameErr = false;
                    return false;
                }
                else{
                    $('#username_msg').hide();
                }

                if(username.length > 25 ){
                    $('#username_msg').show();
                    $('#username_msg').html("Max: 25 Characters allowed.");//overrides
                    $('#username_msg').focus();
                    $('#username_msg').css("color","red");
                    usernameErr = false;
                    return false;
                }
                else{
                    $('#username_msg').hide();
                }

                if(username.length < 5 ){
                    $('#username_msg').show();
                    $('#username_msg').html("Min: 5 Characters allowed.");//overrides
                    $('#username_msg').focus();
                    $('#username_msg').css("color","red");
                    usernameErr = false;
                    return false;
                }
                else{
                    $('#username_msg').hide();
                }

                if(username.match(/^\d/)){   //for numeric validation when starting name
                    $('#username_msg').show();
                    $('#username_msg').html("Username should start with alphabet.");//overrides
                    $('#username_msg').focus();
                    $('#username_msg').css("color","red");
                    usernameErr = false;
                    return false;
                }
                else{
                    $('#username_msg').hide();
                }

                if((username.match(/^\W/)) || (username.match("^[_]$")) ){    //for special characters validation when starting name
                    $('#username_msg').show();
                    $('#username_msg').html("Username should start with alphabet.");//overrides
                    $('#username_msg').focus();
                    $('#username_msg').css("color","red");
                    usernameErr = false;
                    return false;
                }
                else{
                    $('#username_msg').hide();
                }
                
            }
            //<Username_Validation> ends



            //<Validation_on_Submit_btn> starts
            $('#submit-btn').click(function(){


            nameErr = true;
            emailErr = true;
            cnicErr = true;
            specErr = true;
            usernameErr = true;
            



            name_check();
            email_check();
            cnic_check();
            spec_check();
            username_check();
            

            if((nameErr == true) && (emailErr == true) && (cnicErr == true) && (specErr == true) && (usernameErr == true)/*&& (lnameErr == true) && (genderErr == true)  && (passwordErr == true) && (conpasswordErr == true) && (phoneErr == true) && (countryErr == true)*/){
                return true;
            }
            else{
                return false;
            }


            });
            //</Validation_on_Submit_btn> ends



        });
    </script>

    

{% endblock %}
